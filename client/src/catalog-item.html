<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="catalog-styles.html">

<dom-module id="catalog-item">
  <template>
    <style include="catalog-styles"></style>
    <style>
      h1 {
        margin-bottom: 8px;
      }

      .box {
        margin: 16px 0;
      }

      .box > a {
        color: inherit;
      }

      #header {
        padding: 24px;
      }

      #description {
        color: hsl(0, 0%, 50%);
      }

      #author {
        line-height: 30px;
        vertical-align: top;
        display: flex;
      }

      #footer {
        border-top: 1px solid #ededed;
        padding: 12px 16px;
      }

      .avatar {
        margin-right: 8px;
      }

      #stats {
        display: flex;
        margin-top: 8px;
        color: black !important;
      }

      #stats div {
        display: flex;
        align-items: center;
        margin-right: 16px;
      }

      #stats svg {
        width: 16px;
        height: 16px;
        margin-right: 5px;
      }

    </style>

    <div class="box">
      <a href="/[[data.kind]]/[[data.owner]]/[[data.repo]][[_versionPath(data.version, data.latest_version)]]">
        <div id="header">
          <h1>[[data.repo]]</h1>
          <div id="description">[[data.description]]</div>
          <div id="stats">
            <div>
              <svg viewBox="0 0 100 100" class="octicon octicon-star">
               <use xlink:href="/sprite.octicons.svg#star"></use>
              </svg>
              [[data.stars]]
            </div>
            <div>
              <svg viewBox="0 0 100 100" class="octicon octicon-repo-forked">
               <use xlink:href="/sprite.octicons.svg#repo-forked"></use>
              </svg>
              [[data.forks]]
            </div>
            <div>
              <svg viewBox="0 0 100 100" class="octicon octicon-eye">
               <use xlink:href="/sprite.octicons.svg#eye"></use>
              </svg>
              [[data.subscribers]]
            </div>
          </div>
        </div>
      </a>
      <div id="footer">
        <div id="author">
          <img class="avatar" src="[[data.avatar_url]]&s=40">
          <div>by <a href="/author/[[data.owner]]">[[data.owner]]</a></div>
        </div>
      </div>
    </div>
  </template>

  <script>
    Polymer({

      is: 'catalog-item',

      properties: {
        data: Object
      },

      _versionPath: function(version, latestVersion) {
        return version == latestVersion ? '' : '/' + version;
      },

    });
  </script>
</dom-module>
